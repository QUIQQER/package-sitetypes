
{if $Template->getAttribute('content-header')}
<section class="content-header grid-100 mobile-grid-100">
    <header>
        <h1>{$Site->getAttribute('title')}</h1>
    </header>

    {if $Site->getAttribute('short')}
    <div class="content-short">
        {$Site->getAttribute('short')}
    </div>
    {/if}
</section>
{/if}

{if $Template->getAttribute('content-body') && $Site->getAttribute('content')}
<section class="content-body grid-100 mobile-grid-100">
    {$Site->getAttribute('content')}
</section>
{/if}


<div class="content-template grid-100 mobile-grid-100 qui-search-result">

    <form action="{url site=$Site}" method="GET">
        <input type="text" name="search"
            value="{$searchValue}"
            class="form-field-search"
            placeholder="{t}quiqqer/sitetypes tpl.search.placeholder{/t}"
        />

        <input type="submit" name="submit"
            value="{t}quiqqer/sitetypes tpl.search.button{/t}"
            class="qui-button"
        />
    </form>

    <section class="content-template grid-100 mobile-grid-100 qui-search-result-list">
    {if empty($children)}
        <div class="qui-search-result-list-message">
            {locale group="quiqqer/sitetypes" value="tpl.search.no.results"}
        </div>
    {else}
        {control control="\QUI\Controls\Sheets" Site=$Site sheets=$sheets search=$searchValue}

        {foreach from=$children item=Child}
        {assign var=Child value=$Child->load()}

            <article class="qui-search-result-list-entry">

                <h2>
                    <a href="{url site=$Child}"
                       title="{$Child->getAttribute('title')|escape:"html"}"
                    >
                        <span>{$Child->getAttribute('title')}</span>
                    </a>
                </h2>

                <div class="qui-search-result-list-entry-content grid-100 mobile-grid-100 grid-parent">

                    {assign var=bg value=""}

                    {if $Child->getAttribute('image_site')}
                        {image src=$Child->getAttribute('image_site') width="300" type="resize" onlysrc=1 assign=bg}
                    {/if}

                    <a href="{url site=$Child}"
                       title="{$Child->getAttribute('title')|escape:"html"}"
                       class="qui-search-result-list-entry-imagelink grid-25 hide-on-mobile content-image-placeholder"
                       style="background-image: url({$bg})"
                    >
                        <span>{$Child->getAttribute('title')}</span>
                    </a>

                    <div class="qui-search-result-list-entry-short grid-75 mobile-grid-100">
                        {$Child->getAttribute('short')}
                        <a href="{url site=$Child}">
                            {locale group="quiqqer/sitetypes" value="tpl.search.list.more"}
                        </a>
                    </div>

                </div>
            </article>
        {/foreach}

        {control control="\QUI\Controls\Sheets" Site=$Site sheets=$sheets search=$searchValue}
    {/if}

    </section>

</div>
