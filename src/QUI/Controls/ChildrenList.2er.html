
{assign var=Placeholder value=$Project->getMedia()->getPlaceholderImage()}

{if $this->getAttribute('showTitle') && $this->getAttribute('frontendTitle')}
<header class="control-header">
    <h1>{$this->getAttribute('frontendTitle')}</h1>
</header>
{/if}

{if $this->getAttribute('content') != ""}
<div class="control-content">
    {$this->getAttribute('content')}
</div>
{/if}

<section itemscope itemtype="{$this->getAttribute('itemtype')}"
         class="qui-control-list-section qui-list-icons grid-children"
>

    <link property="mainEntityOfPage" href="{url site=$Site}">

    {assign var=counter value=1}

    <div class="qui-list-row grid-children-container">
    {foreach from=$children item=Child key=key}
    {assign var=_Child value=$Child->load()}
        <article itemscope
                 itemprop="itemListElement"
                 itemtype="{$this->getAttribute('child-itemtype')}"
                 class="qui-list-entry grid-50 mobile-grid-100"
        >
            <meta itemprop="position" content="{$counter}" />
            {assign var=counter value=$counter+1}

            <!-- entry image -->
            {if $this->getAttribute('showImages')}

                <div class="qui-list-entry-image">
                    <a href="{url site=$Child}" class="mainFontColor">

                    {assign var=noImageClass value=" qui-control-list-entry-short-noImage"}
                    {assign var=noShortClass value=" qui-control-list-entry-image-noShort"}

                    {if $this->getAttribute('showImages')}
                        {assign var=noImageClass value=""}
                    {/if}

                    {if $this->getAttribute('showShort')}
                        {assign var=noShortClass value=""}
                    {/if}

                    {if $Child->getAttribute('image_site')}
                        {image src=$Child->getAttribute('image_site')
                        style="width: 100%; height: auto;"
                        width="580"}
                    {else}
                        <img src="{$Child->getProject()->getMedia()->getPlaceholder()}" style="width: 100%; height: auto;" />
                    {/if}
                        </a>
                </div>
                {/if}

                <!-- entry content -->
                <div class="qui-list-entry-content">

                    {if $this->getAttribute('showHeader')}
                    <header>
                        <h1 itemprop="name">
                            <a itemprop="url" href="{url site=$Child}" class="qui-list-entry-header-link">
                                {$Child->getAttribute('title')}
                            </a>
                        </h1>
                    </header>
                    {/if}

                    {if $this->getAttribute('showShort')}
                    <p class="qui-list-entry-short">
                        {$Child->getAttribute('short')|nl2br}
                    </p>
                    {/if}

                    <div class="qui-list-entry-footer">
                        {if $this->getAttribute('showCreator') || $this->getAttribute('showDate')}
                        <p class="qui-list-entry-footer-author-and-date">

                            {if $this->getAttribute('showCreator')}
                                {user id=$Child->getAttribute('c_user') var=User}
                                <span class="fa fa-user"></span>
                                {if $User->getId() && $User->getAttribute('firstname')}
                                    {$User->getAttribute('firstname')}
                                {else if $User->getId()}
                                    {$User->getname()}
                                {/if}
                            {/if}

                            {if $this->getAttribute('showDate')}
                                {if $Child->getAttribute('release_from') &&
                                    $Child->getAttribute('release_from') != '0000-00-00 00:00:00'}
                                    <span class="fa fa-calendar
                                            {if $this->getAttribute('showCreator') &&
                                            $this->getAttribute('showDate')} qui-list-entry-icon{/if}
                                    "></span>
                                    <time datetime="{$Child->getAttribute('release_from')|date_format:"c"}"
                                    itemprop="datePublished"
                                    >
                                    {locale_date date=$Child->getAttribute('release_from')}
                                    </time>
                                {else}
                                    <time datetime="{$Child->getAttribute('c_date')|date_format:"c"}"
                                    itemprop="datePublished"
                                    >
                                    {locale_date date=$Child->getAttribute('c_date')}
                                    </time>
                                {/if}
                            {/if}
                        </p>
                        {/if}
                        <a href="{url site=$Child}" class="qui-list-entry-footer-button button">
                            {locale group="quiqqer/sitetypes" value="list.icons.more"}
                        </a>
                    </div>
                </div>


        </article>
        {assign var=modKey value=$key+1}
        {if $modKey && $modKey % 2 === 0 && !$Child@last}
    </div>
    <div class="qui-list-row grid-children-container">
        {/if}

    {/foreach}
</section>

{if $this->getAttribute('showSheets')}
{$Pagination->create()}
{/if}