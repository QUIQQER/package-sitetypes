
{assign var=Placeholder value=$Project->getMedia()->getPlaceholderImage()}

<section itemscope itemtype="{$this->getAttribute('itemtype')}"
         class="qui-control-list-section"
>
    <link property="mainEntityOfPage" href="{url site=$Site}">

    {assign var=counter value=1}

    {foreach from=$children item=Child}
    {assign var=_Child value=$Child->load()}
    <article itemscope
             itemprop="itemListElement"
             itemtype="{$this->getAttribute('child-itemtype')}"
             class="qui-list-entry"
    >
        <meta itemprop="position" content="{$counter}" />
        {assign var=counter value=$counter+1}

        <!-- entry image -->

        {assign var=noImageClass value=" qui-control-list-entry-short-noImage"}
        {assign var=noShortClass value=" qui-control-list-entry-image-noShort"}

        {if $this->getAttribute('showImages')}
            {assign var=noImageClass value=""}
        {/if}

        {if $this->getAttribute('showShort')}
            {assign var=noShortClass value=""}
        {/if}

        {if $this->getAttribute('showImages')}
        <div class="qui-list-entry-image grid-40 grid-container">
                {if $Child->getAttribute('image_site')}
                    {image src=$Child->getAttribute('image_site')
                           width="500"
                           type="resize"
                    }
                {else}
                    <img itemprop="image" src="{$Child->getProject()->getMedia()->getPlaceholder()}"
                         class="news-list-image"/>
                {/if}
        </div>
        {/if}
        <!-- entry content -->
        <div class="qui-list-entry-content
                    {if !$noImageClass}grid-60{/if} grid-container {$noImageClass}">

            {if $this->getAttribute('showHeader')}
            <h2>
                <span itemprop="name">{$Child->getAttribute('title')}</span>
            </h2>
            {/if}

            {if $this->getAttribute('showShort')}
            <div class="qui-list-entry-short{$noImageClass}">
                {$Child->getAttribute('short')|nl2br}
            </div>
            {/if}

            <div class="qui-list-entry-content-footer"
                {if !$this->getAttribute('showCreator') && !$this->getAttribute('showTime')}
                style="border-bottom: none; border-top: none;"
                {/if}
                >
                {if $this->getAttribute('showCreator') || $this->getAttribute('showTime')}
                <div class="qui-list-entry-content-footer-relase-date" >

                    {if $this->getAttribute('showCreator')}
                    <span class="qui-control-list-entry-date-author">
                        {user id=$Child->getAttribute('c_user') var=User}
                        <span class="fa fa-user"></span>
                        {if $User->getId() && $User->getAttribute('firstname')}
                            {$User->getAttribute('firstname')}
                        {else if $User->getId()}
                            {$User->getname()}
                        {/if}
                    </span>
                    {/if}

                    {if $this->getAttribute('showTime')}
                        {if $Child->getAttribute('release_from') &&
                            $Child->getAttribute('release_from') != '0000-00-00 00:00:00'}
                            <span class="fa fa-calendar"></span>
                            <time datetime="{$Child->getAttribute('release_from')|date_format:"c"}"
                            itemprop="datePublished"
                            >
                            {locale_date date=$Child->getAttribute('release_from')}
                            </time>
                        {else}
                            <time datetime="{$Child->getAttribute('c_date')|date_format:"c"}"
                            itemprop="datePublished"
                            >
                            {locale_date date=$Child->getAttribute('c_date')}
                            </time>
                        {/if}
                    {/if}
                </div>
                {/if}

                <a itemprop="url" href="{url site=$Child}" class="button list-entry-link">
                    {locale group="quiqqer/sitetypes" value="list.more"}
                </a>
            </div>

        </div>

    </article>



    {/foreach}
</section>

{if $this->getAttribute('showSheets')}
{$Pagination->create()}
{/if}